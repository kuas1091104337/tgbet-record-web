import{c as S,o as i,a as _,b as s,n as u,F as k,r as I,w as p,v as m,t as c,u as l,d as R,e as Z,f as q,g as M,h as K,i as j,j as z,k as A,_ as B,l as H,m as U}from"./index-5d7d8c80.js";import{a as J}from"./axios-a356b00f.js";import{d as b}from"./dayjs.min-804b777f.js";const T={class:"pagination"},W=["onClick"],E={__name:"LotteryCenterPage",props:{currentPage:{type:Number,default:1},totalPage:{type:Number,default:1},changePage:{type:Function,default:()=>{}}},setup(x){const e=x,P=S(()=>{const n=e.totalPage-8,C=Math.max(1,e.currentPage-8/2>n?n:e.currentPage-8/2),f=Math.min(e.totalPage,e.currentPage+8/2<9?9:e.currentPage+8/2),h=[];for(let y=C;y<=f;y++)h.push(y);return h});return(g,t)=>(i(),_("ul",T,[s("li",{class:u(["pagination_btn pagination_btn-long",{"pagination_btn-disabled":e.currentPage<=10}]),onClick:t[0]||(t[0]=n=>e.changePage(e.currentPage-10))},"上10页",2),s("li",{class:u(["pagination_btn pagination_btn-m",{"pagination_btn-disabled":e.currentPage===1}]),onClick:t[1]||(t[1]=n=>e.changePage(e.currentPage-1))},"上一页",2),(i(!0),_(k,null,I(l(P),n=>p((i(),_("li",{key:n,class:u(["pagination_btn pagination_btn-short",{"pagination_btn-active":n===e.currentPage}]),onClick:C=>e.changePage(n)},c(n),11,W)),[[m,e.totalPage!==1]])),128)),s("li",{class:u(["pagination_btn pagination_btn-m",{"pagination_btn-disabled":e.currentPage===e.totalPage}]),onClick:t[2]||(t[2]=n=>e.changePage(e.currentPage+1))},"下一页",2),s("li",{class:u(["pagination_btn pagination_btn-long",{"pagination_btn-disabled":e.currentPage>e.totalPage-10}]),onClick:t[3]||(t[3]=n=>e.changePage(e.currentPage+10))},"下10页",2)]))}},L="/assets/fafaquanTitle-54668f85.png",Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAMAAACf4xmcAAAB71BMVEUAAABWhvg8hvI/fe9Jc+ZKdOmGnP90l/9Kb+OZnf1KceRFeOhKcuWRnf2Tnf1CfOxIc+dFeuxDeeyTnPpunv+dnP9AhfGunf2nnf1xnPyWnPxAfeuInf1Fdug5hvI9gu5UY9xNbOGQnf1knP4/mv1Pad8um/5Bfet8nP5FeOhTZdxKm/2unv0xm/yEnf6anfw1jvUxm/5Fm/4vlfqknv2bnP2nnf0/m/0vlvtObOFqnP5ObeKRnv87hfBanP9NbOE+g/Cun/8vlvw5ivScn/tYnP0xkvqVnf9znv9KcONSY95CmvtJZ+Kgnfwzj/ZAfutDm/5jnP1Qm/01mv4smf2tnfxjm/yunf1/m/1xnP1Jm/1Ce+pFd+hUZd1Qm/0zj/aTnP04iPOFnP1Ce+pJc+R4m/xPm/w+gu6nnfw8mv49gu+AnPxQm/1qm/00mv02i/Sunv14nP1Xmv1IdedFeOldnP1FeOh4nP0ulvs5iPNrm/2NnP1WY9xbm/yHnP+VnP9HdeZJceSgnPxEeOiZnPxCe+pMbuKnnPySnP2MnP0/fuyFnP07hfB+nPx3m/xqm/xdm/xWm/wulfoxkvg2i/Q4iPI9ge5xm/07mv0smPwzjvZJmv1Cmv00mv0umv1jm/xOa+BRaN5Pm/xQmvxTZNycoWlQAAAAgHRSTlMACj8UODAOBfHk1MylbFFPSTwiHhcUEfn59vT08/Hu7u7r5N/c29ra2NfMy8rHv7y6ubSyqqmcmJWShIR2dHNkY11UUDs3MzAqKR8dGv74+PX08/Dw7Ozp6ejl5N7e3NvW1dPOxsXCtLGvq6imoaGhoKCTkoyJhoR5a2lnX1RIJMzmrNYAAAISSURBVDjLjdRnV9swFAbga5MwS8sKLbOUPQplFSgtlLIp3XvvsvfeJI4zCHtvSIAfypUdEzuxMO8n6ZznWJaurkAWZnqg5curnbfpRWP1QEtj9+uV1ZP9g53Do9219Z8VjBqK6t9ePl5ZPZXY3kZila+a+bQksB+FpaU9ue8I21xo9fNSofOLyFIqm91ztuwFsq2MCKWaQ/Z5IgA8ae5F5vgqd9ftyP5HgTI1iVsOS5ZnI5GxyDoDwDv62w6L+RpIKebtc3mofBL+0mI2hrkntRxvTzaAWqqQBbvHbcgmQT1/zUaT+DnDLY7/BZSwyMS/e2Lj+FCgJctoChR+uw9ZJJWNGE1WHRnctXFBQE0Yssdk8N7G3aOzCGQPyeCmjbtPZ9HIHmgzP4l9vHTRJrKo9hZuSFsowQOZpbIhZHrpeB9R2Tc8XmHgj8VKZmhrXhQLirH0tM9lIAsXhw3PeXu8erkq8CL9kyYleC3/+Kst6UCmk2aGILzkeb6OJZd80DOvjcWWyWz0UuPYWZYQRt5apAFjyuUfrM/fFFg0yF08aecPw3XuglcXYdcTZg5RdH5Dpvg4vMkpbC9I3xUfh4440jIKx4zGEHbieWp+s8DG4bkFP1O+SeUpshcpv0bo1ASsaRo6Reoqu3JSU3MLyqqllXQJJqsz7SloRRdodbq+azv9HafrLBuu4FxnSaCdpuykqXNBjLtyTBOLIwAAAABJRU5ErkJggg==",v="/assets/fafaquanIcon-0bfecbf5.png";const D={class:"wrap"},V={class:"lotteryCenter"},X=s("img",{class:"lotteryCenter_title",src:L},null,-1),G={class:"lotteryCenter_issueNum"},Y={class:"lotteryCenter_issueNum_title"},$={class:"lotteryCenter_search"},tt=["onKeydown"],et=s("img",{src:Q,class:"lotteryCenter_search__img"},null,-1),st=[et],at={class:"lotteryCenter__list"},nt=z('<li class="lotteryCenter__list_item lotteryCenter__list_item-wait"><img src="'+v+'" class="lotteryCenter__list__icon"><p class="lotteryCenter__list__issueNo">202304170093期</p><p class="lotteryCenter__list__result"></p><p class="lotteryCenter__list__wait"><span class="lotteryCenter__list__wait_time">00:06:50</span><span class="lotteryCenter__list__wait_next">距离下期 (13:05开奖)</span></p><p class="lotteryCenter__list__status">待开奖</p></li><li class="lotteryCenter__list_item lotteryCenter__list_item-revoke"><img src="'+v+'" class="lotteryCenter__list__icon"><p class="lotteryCenter__list__issueNo">202304170093期</p><p class="lotteryCenter__list__result"></p><p class="lotteryCenter__list__status">已撤销</p></li><li class="lotteryCenter__list_item lotteryCenter__list_item-result"><img src="'+v+'" class="lotteryCenter__list__icon"><p class="lotteryCenter__list__issueNo">202304170093期</p><p class="lotteryCenter__list__result">拳头✊</p><p class="lotteryCenter__list__status">已开奖</p></li>',3),rt=s("img",{src:v,class:"lotteryCenter__list__icon"},null,-1),lt={class:"lotteryCenter__list__issueNo"},ot={class:"lotteryCenter__list__result"},it={class:"lotteryCenter__list__result_tag"},_t={key:0,src:B,class:"lotteryCenter__list__result_img"},ct={key:1,src:H,class:"lotteryCenter__list__result_img"},ut={key:2,src:U,class:"lotteryCenter__list__result_img"},gt={key:0,class:"lotteryCenter__list__wait"},dt={class:"lotteryCenter__list__wait_time"},pt={class:"lotteryCenter__list__wait_next"},mt={class:"lotteryCenter__list__status"},yt={class:"lotteryCenter__list_item"},Pt=s("p",{class:"lotteryCenter__list__error"},"查无局号资料",-1),Ct=[Pt],ft={class:"lotteryCenter__list_item"},ht={class:"lotteryCenter__list__error"},wt={__name:"lotteryCenter",setup(x){let e=null;const P=R(),g=Z(null),t=q({issueNo:"",lotteryCode:"",currentPage:1,pageSize:25,totalPage:1,list:[],countdown:"",searchStatus:!1,issueNoError:!1,apiError:!1,apiMsg:""}),n=async()=>{try{const a=await J.post("/api/game/issueInfo",{issueNo:t.issueNo,lotteryCode:t.lotteryCode,page:t.currentPage,pageSize:t.pageSize});a.data.success===!0?(a.data.data.data.length===0&&(t.issueNoError=!0),t.list=a.data.data.data,t.totalPage=a.data.data.totalPage,a.data.data.data[1].result===null&&setTimeout(()=>{clearInterval(e),e=null,n()},3e3)):a.data.success===!1&&(t.apiError=!0,t.apiMsg=a.data.msg,console.error(a.data))}catch(a){console.error(a)}},C=a=>{a>=1&&a<=t.totalPage&&(e!==null&&(clearInterval(e),e=null),t.currentPage=a,n())},f=a=>{const o=(Math.floor(a/60%60)+"").padStart(2,"0"),d=(Math.floor(a%60)+"").padStart(2,"0");t.countdown="00:"+o+":"+d},h=a=>{switch(a){case"已开奖":return"result";case"待开奖":return"wait";case"已撤销":return"revoke"}},y=(a,o)=>{if(o!==null)return"";const d=b(a),r=d.diff(b(),"second");if(r>0&&(f(r),e=setInterval(()=>{const N=d.diff(b(),"second");N>0?f(N):(t.countdown="00:00:00",clearInterval(e),e=null,setTimeout(()=>t.countdown="",1e3),setTimeout(()=>n(),3e3))},1e3)),r===0)return"";if(r>0)return"距离下期 ("+a.substr(a.indexOf(" ")+1,5)+"开奖)"},O=S(()=>t.list.length?t.list.map(o=>({class:h(o.status),issueNo:o.issueNo+"期",result:o.result,status:o.status,waitNext:y(o.lotteryTime,o.result)})):void 0),F=()=>{e!==null&&(clearInterval(e),e=null),t.searchStatus=!1,t.issueNoError=!1,t.issueNo="",g.value.value="",t.currentPage=1,n()},w=()=>{g.value.value&&(e!==null&&(clearInterval(e),e=null),t.issueNo=g.value.value,n(),t.searchStatus=!0)};return M(()=>{document.title="发发拳 - 开奖中心",t.lotteryCode=P.query.lotteryCode,console.log(P.query.lotteryCode),n()}),(a,o)=>{const d=E;return i(),_("div",D,[s("div",V,[X,p(s("div",G,[s("p",Y,"搜索："+c(l(t).issueNo)+"期",1),s("a",{href:"javascript:;",class:"lotteryCenter_issueNum_reset",onClick:F},"重置")],512),[[m,l(t).searchStatus]]),p(s("div",$,[s("input",{type:"number",class:"lotteryCenter_search_input",placeholder:"请输入要搜索的局号",name:"",id:"",ref_key:"inputVal",ref:g,onKeydown:K(w,["enter"])},null,40,tt),s("a",{href:"javascript:;",class:"lotteryCenter_search_submit",onClick:w},st)],512),[[m,!l(t).searchStatus]]),s("div",{class:u(["lotteryCenter_wrap",{"lotteryCenter_wrap-search":l(t).searchStatus}])},[s("ul",at,[nt,(i(!0),_(k,null,I(l(O),r=>(i(),_("li",{class:u(["lotteryCenter__list_item lotteryCenter__list_item-"+r.class]),key:r.issueNo},[rt,s("p",lt,c(r.issueNo),1),s("p",ot,[s("em",it,c(r.result),1),r.result==="剪刀"?(i(),_("img",_t)):r.result==="拳头"?(i(),_("img",ct)):r.result==="布"?(i(),_("img",ut)):A("",!0)]),r.waitNext?(i(),_("p",gt,[s("span",dt,c(l(t).countdown),1),s("span",pt,c(r.waitNext),1)])):A("",!0),s("p",mt,c(r.status),1)],2))),128)),p(s("li",yt,Ct,512),[[m,l(t).issueNoError]]),p(s("li",ft,[s("p",ht,c(l(t).apiMsg),1)],512),[[m,l(t).apiError]])]),p(j(d,{currentPage:l(t).currentPage,totalPage:l(t).totalPage,changePage:C},null,8,["currentPage","totalPage"]),[[m,!l(t).searchStatus]])],2)])])}}};export{wt as default};
